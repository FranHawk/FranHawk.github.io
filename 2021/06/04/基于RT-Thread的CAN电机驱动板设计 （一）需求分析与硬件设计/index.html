<!DOCTYPE html>
<html lang="cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="本项目依托实验室机器人比赛，需要设计一个电机驱动板，控制8个CAN协议的伺服电机。为了锻炼我对RT-Thread的使用能力同时加快开发进度，减少花费在驱动代码上的时间，电机驱动板采用了RT-Thread操作系统。 资料连接本项目的所有资料全部开源： 硬件工程：https:&#x2F;&#x2F;lceda.cn&#x2F;FranHawk&#x2F;485tocan_motor_controller软件工程：https:&#x2F;&#x2F;github">
<meta property="og:type" content="article">
<meta property="og:title" content="基于RT-Thread的CAN电机驱动板设计 （一）需求分析与硬件设计">
<meta property="og:url" content="http://example.com/2021/06/04/%E5%9F%BA%E4%BA%8ERT-Thread%E7%9A%84CAN%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%9D%BF%E8%AE%BE%E8%AE%A1%20%EF%BC%88%E4%B8%80%EF%BC%89%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E4%B8%8E%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1/index.html">
<meta property="og:site_name" content="张竞豪的小岛">
<meta property="og:description" content="本项目依托实验室机器人比赛，需要设计一个电机驱动板，控制8个CAN协议的伺服电机。为了锻炼我对RT-Thread的使用能力同时加快开发进度，减少花费在驱动代码上的时间，电机驱动板采用了RT-Thread操作系统。 资料连接本项目的所有资料全部开源： 硬件工程：https:&#x2F;&#x2F;lceda.cn&#x2F;FranHawk&#x2F;485tocan_motor_controller软件工程：https:&#x2F;&#x2F;github">
<meta property="og:locale">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021060409532269.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604101117980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604113617491.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604114546562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604114610832.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604114653723.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604114744386.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604115400387.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604115615139.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604132526989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604132603237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604132744121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021060413280728.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604132852650.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604133050957.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604133121655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604133322708.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021060413351316.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210604133536599.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center">
<meta property="article:published_time" content="2021-06-04T11:50:43.000Z">
<meta property="article:modified_time" content="2021-08-13T02:01:01.957Z">
<meta property="article:author" content="Fran Hawk">
<meta property="article:tag" content="RT-Thread">
<meta property="article:tag" content="CAN">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/2021060409532269.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center">

<link rel="canonical" href="http://example.com/2021/06/04/%E5%9F%BA%E4%BA%8ERT-Thread%E7%9A%84CAN%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%9D%BF%E8%AE%BE%E8%AE%A1%20%EF%BC%88%E4%B8%80%EF%BC%89%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E4%B8%8E%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'cn'
  };
</script>

  <title>基于RT-Thread的CAN电机驱动板设计 （一）需求分析与硬件设计 | 张竞豪的小岛</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Navigationsleiste an/ausschalten">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">张竞豪的小岛</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Startseite</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archiv</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="cn">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/04/%E5%9F%BA%E4%BA%8ERT-Thread%E7%9A%84CAN%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%9D%BF%E8%AE%BE%E8%AE%A1%20%EF%BC%88%E4%B8%80%EF%BC%89%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E4%B8%8E%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Fran Hawk">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="张竞豪的小岛">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          基于RT-Thread的CAN电机驱动板设计 （一）需求分析与硬件设计
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Veröffentlicht am</span>

              <time title="Erstellt: 2021-06-04 19:50:43" itemprop="dateCreated datePublished" datetime="2021-06-04T19:50:43+08:00">2021-06-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Bearbeitet am</span>
                <time title="Geändert am: 2021-08-13 10:01:01" itemprop="dateModified" datetime="2021-08-13T10:01:01+08:00">2021-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>本项目依托实验室机器人比赛，需要设计一个电机驱动板，控制<strong>8个CAN协议的伺服电机</strong>。为了锻炼我对RT-Thread的使用能力同时加快开发进度，减少花费在驱动代码上的时间，电机驱动板采用了RT-Thread操作系统。</p>
<h1 id="资料连接"><a href="#资料连接" class="headerlink" title="资料连接"></a>资料连接</h1><p>本项目的所有资料全部开源：</p>
<p><strong>硬件工程</strong>：<a target="_blank" rel="noopener" href="https://lceda.cn/FranHawk/485tocan_motor_controller">https://lceda.cn/FranHawk/485tocan_motor_controller</a><br><strong>软件工程</strong>：<a target="_blank" rel="noopener" href="https://github.com/FranHawk/RT-Thread-485toCAN">https://github.com/FranHawk/RT-Thread-485toCAN</a></p>
<h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><ul>
<li>PC上位机由串口通过485协议发送<strong>电机转矩电流指令</strong>到电机驱动板，电机驱动板对指令解码并通过CAN总线发送转矩控制指令</li>
<li>PC上位机由串口通过485协议发送<strong>状态查询指令</strong>到电机驱动板，电机驱动板对指令解码并通过CAN总线发送<strong>状态查询指令</strong>，电机通过CAN总线返回包括转矩电流和编码器位置在内的状态，由电机驱动板发送回上位机</li>
<li>电机驱动板为电机供电，每个电机最大电流1.5A，则总共需提供最大12A的电流<br><img src="https://img-blog.csdnimg.cn/2021060409532269.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center"></li>
</ul>
<h1 id="协议分析"><a href="#协议分析" class="headerlink" title="协议分析"></a>协议分析</h1><ul>
<li>CAN是物理层与链路层协议，一般微控制器(MCU)均带有CAN链路层外设，需要在硬件上对CAN物理层的支持</li>
<li>485是物理层协议，一般将UART作为链路层与微控制器(MCU)通讯，需在硬件上提供对485物理层的支持<h1 id="硬件设计"><a href="#硬件设计" class="headerlink" title="硬件设计"></a>硬件设计</h1><h2 id="硬件需求"><a href="#硬件需求" class="headerlink" title="硬件需求"></a>硬件需求</h2></li>
<li>控制：微控制器</li>
<li>通讯：485转UART芯片，CAN物理层芯片</li>
<li>调试：SWD烧写接口，复位按键，晶振，调试串口，LED<em>2，按键</em>2</li>
<li>电源：直流12V输入，提供3.3V，5V，12V供电。12V需满足电机最大电流要求。</li>
<li>接口：CAN电机接口x8，485接口x2，12V电源接口</li>
</ul>
<h2 id="硬件选型"><a href="#硬件选型" class="headerlink" title="硬件选型"></a>硬件选型</h2><h3 id="伺服电机"><a href="#伺服电机" class="headerlink" title="伺服电机"></a>伺服电机</h3><p><img src="https://img-blog.csdnimg.cn/20210604101117980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"></p>
<p>采用光毓机电的<strong>RMDL伺服电机</strong>，RMD-L 伺服电机是一款高集成度的动力输出模组。集成高性能 FOC 驱动器，高功率密度无刷电机，高精度绝对位置编码器三大功能部件。突破传统分布式设计，使得终端产品结构设计更加简洁，产品内部走线更加便捷，整机性能更稳定。</p>
<h3 id="MCU"><a href="#MCU" class="headerlink" title="MCU"></a>MCU</h3><p><strong>STM32F103RET6</strong><br>由于开发时间比较短，我采用了我最常用的STM32F103RET6，它拥有一个CAN控制器，64kRAM，256kROM，满足需求，实际上RAM用不到这么大，毕竟现在芯片这么贵，其实完全可以采用相同功能但是RAM更小更便宜的芯片</p>
<h3 id="485"><a href="#485" class="headerlink" title="485"></a>485</h3><p><strong>SP3485</strong><br>参照了正点原子战舰开发板上的设计</p>
<h3 id="CAN"><a href="#CAN" class="headerlink" title="CAN"></a>CAN</h3><p><strong>TJA1050</strong><br>参照了正点原子战舰开发板上的设计,5V供电</p>
<h3 id="12V供电"><a href="#12V供电" class="headerlink" title="12V供电"></a>12V供电</h3><p>采用程控电源直接给电机驱动板提供12V供电，但是要保证电机驱动板可以通过足够大的电流，预计在PCB上采用开窗的方式加大电流承载量。</p>
<h3 id="5V-3-3V供电"><a href="#5V-3-3V供电" class="headerlink" title="5V,3.3V供电"></a>5V,3.3V供电</h3><ul>
<li><strong>TPS5430</strong>开关电源将12V降至7.3V保证供电效率</li>
<li><strong>AMS1117-5.0</strong>将7.3V降至5V</li>
<li><strong>AMS1117-3.3</strong>将5V降至3.3V</li>
</ul>
<h2 id="硬件整体结构"><a href="#硬件整体结构" class="headerlink" title="硬件整体结构"></a>硬件整体结构</h2><p><img src="https://img-blog.csdnimg.cn/20210604113617491.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center"><br>采用了两个SP3485芯片，其实一片就够用了，为了提高硬件的可扩展性，又另外加了一片</p>
<h2 id="硬件设计流程"><a href="#硬件设计流程" class="headerlink" title="硬件设计流程"></a>硬件设计流程</h2><p>采用免费的EDA软件<strong>立创EDA</strong>，可以直接从立创商城导入封装，同时可以采用浏览器编辑器，全部云端化处理，免去下载软件的麻烦。<br>完整硬件工程链接如下<br><a target="_blank" rel="noopener" href="https://oshwhub.com/FranHawk/485tocan_motor_controller">https://oshwhub.com/FranHawk/485tocan_motor_controller</a><br>接下来展示各个硬件部分的原理图。</p>
<h3 id="STM32主控部分"><a href="#STM32主控部分" class="headerlink" title="STM32主控部分"></a>STM32主控部分</h3><p><img src="https://img-blog.csdnimg.cn/20210604114546562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/20210604114610832.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"></p>
<h3 id="STM32调试部分"><a href="#STM32调试部分" class="headerlink" title="STM32调试部分"></a>STM32调试部分</h3><p><img src="https://img-blog.csdnimg.cn/20210604114653723.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"></p>
<h3 id="7-3V开关电源部分"><a href="#7-3V开关电源部分" class="headerlink" title="7.3V开关电源部分"></a>7.3V开关电源部分</h3><p><img src="https://img-blog.csdnimg.cn/20210604114744386.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/20210604115400387.png"></p>
<ul>
<li>我参照了数据手册的参考设计，数据手册可以在立创商城上找。</li>
<li>其中R1，R2的计算公式如上，R1为10k，R2为2k，计算得到输出电压为7.3V。</li>
<li>这里设计的时候我设计出现了一个问题，板子到了后发现7.3V电压无法正常输出，通过查看数据手册发现ENA浮空就好了。<br><img src="https://img-blog.csdnimg.cn/20210604115615139.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><h3 id="5V电源部分"><a href="#5V电源部分" class="headerlink" title="5V电源部分"></a>5V电源部分</h3><img src="https://img-blog.csdnimg.cn/20210604132526989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><h3 id="3-3V电源部分"><a href="#3-3V电源部分" class="headerlink" title="3.3V电源部分"></a>3.3V电源部分</h3><img src="https://img-blog.csdnimg.cn/20210604132603237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><h3 id="485电路部分"><a href="#485电路部分" class="headerlink" title="485电路部分"></a>485电路部分</h3><img src="https://img-blog.csdnimg.cn/20210604132744121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/2021060413280728.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><h3 id="CAN电路部分"><a href="#CAN电路部分" class="headerlink" title="CAN电路部分"></a>CAN电路部分</h3><img src="https://img-blog.csdnimg.cn/20210604132852650.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><h3 id="12V及CAN接口电路部分"><a href="#12V及CAN接口电路部分" class="headerlink" title="12V及CAN接口电路部分"></a>12V及CAN接口电路部分</h3><img src="https://img-blog.csdnimg.cn/20210604133050957.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/20210604133121655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"><h3 id="PCB"><a href="#PCB" class="headerlink" title="PCB"></a>PCB</h3><img src="https://img-blog.csdnimg.cn/20210604133322708.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70"></li>
</ul>
<h2 id="硬件制作流程"><a href="#硬件制作流程" class="headerlink" title="硬件制作流程"></a>硬件制作流程</h2><p>采用嘉立创的PCB制版和SMT贴片，贴片的时候的BOM表和有极性的芯片贴片方向一定要仔细调整。从投板，贴片，到收到货总共花费5天时间。最终成品图如下。</p>
<h3 id="正面图"><a href="#正面图" class="headerlink" title="正面图"></a>正面图</h3><p><img src="https://img-blog.csdnimg.cn/2021060413351316.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h3 id="背面图"><a href="#背面图" class="headerlink" title="背面图"></a>背面图</h3><p><img src="https://img-blog.csdnimg.cn/20210604133536599.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ4NzkwNg==,size_16,color_FFFFFF,t_70#pic_center"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/RT-Thread/" rel="tag"># RT-Thread</a>
              <a href="/tags/CAN/" rel="tag"># CAN</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/05/RISCV%20%E5%90%91%E9%87%8F%E6%8C%87%E4%BB%A4%E9%9B%86%E5%92%8CNICE%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="prev" title="RISCV 向量指令集和NICE接口学习笔记">
      <i class="fa fa-chevron-left"></i> RISCV 向量指令集和NICE接口学习笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/06/05/%E5%9F%BA%E4%BA%8ERT-Thread%E7%9A%84CAN%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%9D%BF%E8%AE%BE%E8%AE%A1%20%EF%BC%88%E4%BA%8C%EF%BC%89uart%E4%B8%B2%E5%8F%A3DMA%E7%9A%84%E5%AE%9E%E7%8E%B0/" rel="next" title="基于RT-Thread的CAN电机驱动板设计 （二）uart串口DMA的实现">
      基于RT-Thread的CAN电机驱动板设计 （二）uart串口DMA的实现 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Inhaltsverzeichnis
        </li>
        <li class="sidebar-nav-overview">
          Übersicht
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B5%84%E6%96%99%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.</span> <span class="nav-text">资料连接</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="nav-number">2.</span> <span class="nav-text">需求分析</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90"><span class="nav-number">3.</span> <span class="nav-text">协议分析</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.</span> <span class="nav-text">硬件设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E9%9C%80%E6%B1%82"><span class="nav-number">4.1.</span> <span class="nav-text">硬件需求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E9%80%89%E5%9E%8B"><span class="nav-number">4.2.</span> <span class="nav-text">硬件选型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%BA%E6%9C%8D%E7%94%B5%E6%9C%BA"><span class="nav-number">4.2.1.</span> <span class="nav-text">伺服电机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MCU"><span class="nav-number">4.2.2.</span> <span class="nav-text">MCU</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#485"><span class="nav-number">4.2.3.</span> <span class="nav-text">485</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CAN"><span class="nav-number">4.2.4.</span> <span class="nav-text">CAN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12V%E4%BE%9B%E7%94%B5"><span class="nav-number">4.2.5.</span> <span class="nav-text">12V供电</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5V-3-3V%E4%BE%9B%E7%94%B5"><span class="nav-number">4.2.6.</span> <span class="nav-text">5V,3.3V供电</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84"><span class="nav-number">4.3.</span> <span class="nav-text">硬件整体结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B"><span class="nav-number">4.4.</span> <span class="nav-text">硬件设计流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#STM32%E4%B8%BB%E6%8E%A7%E9%83%A8%E5%88%86"><span class="nav-number">4.4.1.</span> <span class="nav-text">STM32主控部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#STM32%E8%B0%83%E8%AF%95%E9%83%A8%E5%88%86"><span class="nav-number">4.4.2.</span> <span class="nav-text">STM32调试部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3V%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E9%83%A8%E5%88%86"><span class="nav-number">4.4.3.</span> <span class="nav-text">7.3V开关电源部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5V%E7%94%B5%E6%BA%90%E9%83%A8%E5%88%86"><span class="nav-number">4.4.4.</span> <span class="nav-text">5V电源部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3V%E7%94%B5%E6%BA%90%E9%83%A8%E5%88%86"><span class="nav-number">4.4.5.</span> <span class="nav-text">3.3V电源部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#485%E7%94%B5%E8%B7%AF%E9%83%A8%E5%88%86"><span class="nav-number">4.4.6.</span> <span class="nav-text">485电路部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CAN%E7%94%B5%E8%B7%AF%E9%83%A8%E5%88%86"><span class="nav-number">4.4.7.</span> <span class="nav-text">CAN电路部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12V%E5%8F%8ACAN%E6%8E%A5%E5%8F%A3%E7%94%B5%E8%B7%AF%E9%83%A8%E5%88%86"><span class="nav-number">4.4.8.</span> <span class="nav-text">12V及CAN接口电路部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PCB"><span class="nav-number">4.4.9.</span> <span class="nav-text">PCB</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E5%88%B6%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">4.5.</span> <span class="nav-text">硬件制作流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E9%9D%A2%E5%9B%BE"><span class="nav-number">4.5.1.</span> <span class="nav-text">正面图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%83%8C%E9%9D%A2%E5%9B%BE"><span class="nav-number">4.5.2.</span> <span class="nav-text">背面图</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Fran Hawk</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">Artikel</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">schlagwörter</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fran Hawk</span>
</div>
  <div class="powered-by">Erstellt mit  <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
